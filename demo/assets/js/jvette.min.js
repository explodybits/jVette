var jVette=function(a,b,c,d){"use strict";function e(d){if(f instanceof e)return f;if(!(this instanceof e))return"undefined"==typeof vette&&(f=new e(d)),f;var h,i=a(this),j=a.extend(!0,{},g,d),k=!j.disabled,l=!1,m=!1,n=0,o=0,p=0,q=!!("ontouchstart"in b.get(0)),r=!!("WebkitAppearance"in c.get(0).documentElement.style),s={},t=!1,u=["-webkit-","-moz-","-ms-","-o-",""],v=!1,w=a("body:last"),x=a(c.get(0).createElement("body")),y=a("html"),z=a("[data-jv-panel]"),A=a("[data-jv-trigger]"),B=a("[data-jv-content]"),C=a(".jv-fixed"),D=a(".jv-panel, .jv-ignore");x.get(0).setAttribute("id","jvette"),w.length&&x.insertAfter(w),function(){var b=a("<div />");b.attr("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;-o-transition:top 1s ease;"),x.append(b),t=!!(b.get(0).style.transition||b.get(0).style.webkitTransition||b.get(0).style.MozTransition||b.get(0).style.OTransitionDuration),t||(j.transforms=!1),b.remove()}();var E=0,F=1,G=2,s=function(){if(E&(F|G)&&!w.is(":animated")){var a=b.width()-s.width,c=s.offset,d={};switch(!0){case 0!==(E&G):var e=p+a;d=!0===j.transforms?K(e,"width"):{width:e};break;default:0>=a&&(d=!0===j.transforms?K(c+=a):{left:a})}w.css(d)}};b.on("resize orientationchange",function(a){h=clearTimeout(h),"orientationchange"===a.type?h=setTimeout(function(){s()},100):s()}),b.scroll(function(){h=clearTimeout(h),h=setTimeout(function(){h=clearTimeout(h),y.hasClass("jv-open")||y.hasClass("jv-opened")||(n=b.scrollTop())},15)}),i.on("closed",function(b){a(".jv-content",b.panel).css("display","")});var H=function(a){"touchmove"===a.type&&a.stopPropagation(),l=!0},I=function(){l=!1},J=function(a){switch(a){case"easeInQuad":a=[.55,.085,.68,.53];break;case"easeOutQuad":a=[.25,.46,.45,.94];break;case"easeInOutQuad":a=[.455,.03,.515,.955];break;case"easeInCubic":a=[.55,.055,.675,.19];break;case"easeOutCubic":a=[.215,.61,.355,1];break;case"easeInOutCubic":a=[.645,.045,.355,1];break;case"easeInQuart":a=[.895,.03,.685,.22];break;case"easeOutQuart":a=[.165,.84,.44,1];break;case"easeInOutQuart":a=[.77,0,.175,1];break;case"easeInQuint":a=[.755,.05,.855,.06];break;case"easeOutQuint":a=[.23,1,.32,1];break;case"easeInOutQuint":a=[.86,0,.07,1];break;case"easeInExpo":a=[.95,.05,.795,.035];break;case"easeOutExpo":a=[.19,1,.22,1];break;case"easeInOutExpo":a=[1,0,0,1];break;case"easeInSine":a=[.47,0,.745,.715];break;case"easeOutSine":a=[.39,.575,.565,1];break;case"easeInOutSine":a=[.445,.05,.55,.95];break;case"easeInCirc":a=[.6,.04,.98,.335];break;case"easeOutCirc":a=[.075,.82,.165,1];break;case"easeInOutCirc":a=[.785,.135,.15,.86];break;case"easeInBack":a=[.6,-.28,.735,.045];break;case"easeOutBack":a=[.175,.885,.32,1.275];break;case"easeInOutBack":a=[.68,-.55,.265,1.55];break;case"swing":a=[.02,.01,.47,1];break;case"linear":return a;default:return null}return"cubic-bezier("+a.join(",")+")"},K=function(b,c){var d={},c=c||"transform";switch(b=parseInt(b),c.toLowerCase()){case"width":d.transition=c+" "+j.slide.duration+"ms "+J(j.slide.easing),d.width=b;break;case"transform":a.each(u,function(a,e){d[e+"transition"]=e+c+" "+j.slide.duration+"ms "+J(j.slide.easing),d[e+"transform"]="translateX("+b+"px)"})}return d},L=function(c){switch(h=clearTimeout(h),s.width=b.width(),s.offset=w.offset().left,s.panel=E&F?z.first():z.last(),s.ratio=s.panel.width()/s.width,!0){case 0!==(E&F):w.css("right","auto"),y.addClass("jv-opened jv-opened-left").removeClass("jv-open jv-open-left");break;case 0!==(E&G):w.css("left","auto"),y.addClass("jv-opened jv-opened-right").removeClass("jv-open jv-open-right");break;default:y.removeClass("jv-opened jv-opened-right jv-opened-left"),b.scrollTop(n);var d={};!0===j.transforms&&a.each(u,function(a,b){d[b+"transition"]="",d[b+"transform"]=""}),d.width="",d.height="",w.css(d),y.css("height",""),C.each(function(){a(this).css({top:"",position:""})}),E=0}var f=E&(F|G)?"opened":"closed";c=c instanceof e.SwipeEvent?new e.SwipeEvent(f,c):new e.TriggerEvent(f,c),i.triggerHandler(c)},M=function(a){(!k||x.is(":animated")||v)&&a.preventDefault()},N=function(b){if(k&&!x.is(":animated")&&!v&&!b.defaultPrevented){var c=a(this),d=c.hasClass("jv-active");A.filter('[data-jv-trigger="'+c.data("jv-trigger")+'"]').removeClass("jv-active"),d||c.addClass("jv-active"),b.preventDefault(),b=new e.TriggerEvent,b.target=this,b.relatedTarget=w.get(0);var g=c.data("jv-trigger"),h=c.data("jv-show");if(!d&&"undefined"!=typeof h&&(h=a.map(h.toString().split(","),function(a){return parseInt(a)}),h.length)){var j=a(".jv-content",b.panel).hide(0),l=null;a.each(h,function(c,d){l=a(j.get(d)),l.length&&(b.type="changed",l.css("display",""))})}switch(!0){case/^c/i.test(g):f.close();break;case E&F&&/^l/i.test(g)&&"changed"===b.type:case E&G&&/^r/i.test(g)&&"changed"===b.type:b.direction=E&F?"left":"right",b.panel=E&F?z.first():z.last(),i.trigger(b);break;case/^r/i.test(g):O(G,b);break;case/^l/i.test(g):default:O(F,b)}}},O=function(d,e){w.is(":animated")||v||(c.get(0).getSelection().removeAllRanges(),e.type=E&(F|G)?"close":"open",e.direction=d&F?"left":"right",e.panel=d&F?z.first():z.last(),e.view={},e.view.height=o,e.view.width=p,e.view.scroll=n,i[0]["on"+e.type]=function(c){if(c.isDefaultPrevented())return void("open"===c.type&&y.removeClass("jv-open"));if(!(E&(F|G))){o=w.height(),p=w.width();var e=o+n+350;w.css({top:-n,height:e,width:p}),y.height(e),b.scrollTop(n),y.addClass("jv-open"),C.each(function(){var b=a(this),c=b.css("top");c="auto"===c?0:c,b.css({top:parseInt(c)+n,position:"absolute"})}),q?z.height(o+350):z.css({top:r?0:n}),x.scrollTop(0)}var e=x.find("div:not(:empty):first").outerWidth(),f={};switch(null===e&&(e=x.find("div:first").outerWidth()),--e,d){case F:!(E&G)&&w.css("right","auto"),f={left:E&F?0:e,right:E&G?0:"auto"},E=E&F?0:F,E&F&&y.removeClass("jv-open-right").addClass("jv-open-left");break;case G:!(E&F)&&w.css("left","auto"),f={right:E&G?0:e,left:E&F?-e:"auto"},E=E&G?0:G,E&G&&y.removeClass("jv-open-left").addClass("jv-open-right")}if(!0===j.transforms){v=!0;var e=Math.abs("auto"!==f.left?f.left:f.right),g={};e>=0?("auto"!==f.right&&"auto"!==f.left&&(e=f.right),g=K(("auto"!==f.right?"-":"")+e)):g=K(e),w.on("transitionend webkitTransitionEnd oTransitionEnd",function(a){v=!1,w.off(a),L(c)}).css(g)}else w.delay(5).stop(!0,!1).animate(f,j.slide.duration,j.slide.easing,function(){L(c)})},i.trigger(e))};this.on=function(){return i.on.apply(i,arguments).get(0)},this.on("close",function(a){a.isDefaultPrevented()||A.removeClass("jv-active")}),this.off=function(){return i.off.apply(i,arguments).get(0)},this.enable=function(){return k&&m?this:i.trigger("enable").get(0)},this.onenable=function(d){k&&m||d.isDefaultPrevented()||(n=b.scrollTop(),w.length||(w=a(w.selector),x.insertAfter(w)),A.length||(A=a(A.selector)),z.length||(z=a(z.selector),z.length||(z=a('<div data-jv-panel="left" /><div data-jv-panel="right" />'))),1===z.length&&(z=z.add(0===z.filter('[data-jv-panel="left"]').length?'<div data-jv-panel="left" />':'<div data-jv-panel="right" />')),z.addClass("jv-panel"),z.parent().length&&(z=z.filter(":first, :last").sort(function(a,b){return a=a.getAttribute("data-jv-panel")||a.dataset.vettePanel,b=b.getAttribute("data-jv-panel")||b.dataset.vettePanel,a>b?1:b>a?-1:0}),z.each(function(b,c){var c=a(c),d=c.data("jv-holder");"undefined"==typeof d&&(d=a("<a />").addClass("jv-holder"),d.attr("id","jv-panel-"+c.data("jv-panel")),c.attr("data-jv-holder",d.attr("id"))),c.parent().get(0)!==x.get(0)?c.replaceWith(d):d.replaceWith(c)})),x.is(":empty")&&(x.append(z.first()),x.append(z.last())),B=a(B.selector).sort(function(a,b){return a=parseInt(a.getAttribute("data-jv-order")||a.dataset.vetteOrder||0),b=parseInt(b.getAttribute("data-jv-order")||b.dataset.vetteOrder||0),a>b?1:b>a?-1:0}),B=B.each(function(b,c){var c=a(c),d=c.data("jv-holder");"undefined"==typeof d&&(d=a("<a />").addClass("jv-holder"),d.attr("id","jv-content-"+b),c.attr("data-jv-holder",d.attr("id"))),c.is(":hidden")&&c.addClass("jv-hidden"),c.replaceWith(d);var e=a.trim(c.data("jv-content"));switch(!0){case/^r/i.test(e):z.last().append(c);break;case/^l/i.test(e):default:z.first().append(c)}}).addClass("jv-content").show(0),D=a(D.selector),C=a(C.selector),D.off(q?"touchmove":"mousemove",H).on(q?"touchmove":"mousemove",H).off(q?"touchend":"mouseout",I).on(q?"touchend":"mouseout",I),A.off(q?"touchend":"click",M).on(q?"touchend":"click",M),A.each(function(a,b){b["on"+(q?"touchend":"click")]=N}),!1!==j.swipe&&a.fn.swipe&&c.swipe({swipe:function(a,b,c,d,f,g){if(!k||l||"undefined"!=typeof h)return!0;var i=new e.SwipeEvent;switch(i.target=this.get(0),i.relatedTarget=this.get(0),i.direction=b,i.distance=c,i.duration=d,i.fingerCount=f,i.fingerData=g,b){case"left":!(E&G)&&O(E&F?F:G,i);break;case"right":!(E&F)&&O(E&G?G:F,i)}},threshold:j.swipe.threshold,allowPageScroll:"vertical"}),k=!0,m=!0,i.trigger("enabled"))},this.disable=function(){return k?i.trigger("disable").get(0):this};var P=function(){B.each(function(b,c){var c=a(c),d=c.data("jv-holder"),e=w.find("a#"+d);e.length&&e.replaceWith(c),c.hasClass("jv-hidden")?c.hide(0).removeClass("jv-hidden"):c.css("display",""),c.removeData("jv-holder").removeAttr("data-jv-holder")}).removeClass("jv-content"),z.each(function(b,c){var c=a(c),d=c.data("jv-holder"),e=w.find("a#"+d);e.length&&e.replaceWith(c),c.removeData("jv-holder").removeAttr("data-jv-holder")}).css("display",""),D.off("mousemove touchmove",H).off("mouseleave mouseup touchend",I),A.off("touchend click",M),A.each(function(a,b){delete b["on"+(q?"touchend":"click")]}),k=!1,i.trigger("disabled")};this.ondisable=function(b){k&&!b.isDefaultPrevented()&&(A.off("touchstart mousedown",N),!1!==j.swipe&&a.fn.swipe&&a(".jv-panel,.jv-ignore").off("mousemove touchmove",function(a){a.preventDefault()}),E&(F|G)?this.on("closed",function(a){this.off(a),P()}).close():P())},this.open=function(a){if(!k)return this;switch(!0){case/^r/i.test(a)&&!(E&G):O(G,new e.TriggerEvent("open"));break;case/^l/i.test(a)&&!(E&F):O(F,new e.TriggerEvent("open"))}return this},this.close=function(){return k&&E&(F|G)?(O(E&F?F:G,new e.TriggerEvent("close")),this):this},j.slide.easing=a.easing&&a.easing[j.slide.easing]?j.slide.easing:"swing",null===J(j.slide.easing)&&(j.slide.easing="swing"),a.each(["enable","enabled","disable","disabled","open","opened","close","closed"],function(a,b){"function"==typeof j["on"+b]&&i.on(b,j["on"+b])}),k&&this.enable()}var f,g={disabled:!1,transforms:!0,slide:{easing:"swing",duration:350},swipe:{threshold:10,allowPageScroll:"vertical"}};return b=a(b),c=a(c),e.TriggerEvent=function(b,c){a.Event.apply(this,[b||null]),this.panel=c&&c.panel||d,this.direction=c&&c.direction||null},e.TriggerEvent.prototype=new a.Event,e.TriggerEvent.prototype.constructor=e.TriggerEvent,e.SwipeEvent=function(a,b){e.TriggerEvent.apply(this,[a,b]),this.distance=b&&b.distance||0,this.duration=b&&b.duration||0,this.fingerCount=b&&b.fingerCount||0,this.fingerData=b&&b.fingerData||{}},e.SwipeEvent.prototype=new e.TriggerEvent,e.SwipeEvent.prototype.constructor=e.SwipeEvent,e}(window.jQuery,window,document,void 0);